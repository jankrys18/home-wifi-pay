<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pay for Home WiFi</title>

<script 
  src="https://www.paypal.com/sdk/js?client-id=BAAAXOQyESI5vxGDXZpCYu4IRGe3clvM1sBdX6Eml7n26Q27JaHgl9q-gsCRzp_MBKy95uYr8wWvRnBGxY&components=hosted-buttons&currency=PHP">
</script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  font-family:Inter,Arial,sans-serif;
  background:#0f172a;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.card{
  background:#020617;
  padding:24px;
  border-radius:16px;
  width:100%;
  max-width:420px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}
h1{text-align:center;margin-bottom:8px;}
p{text-align:center;color:#94a3b8;font-size:14px;}
.plan{
  border:1px solid #1e293b;
  border-radius:12px;
  padding:16px;
  margin-top:16px;
}
.plan h2{margin:0;font-size:18px;}  .plan-sub{color:#cbd5f5;margin-top:6px;font-size:13px;}
  .plan-price{color:#22c55e;font-weight:600;margin-top:6px;}
  .checkout{margin-top:10px;display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:nowrap;}
  /* Ensure PayPal container has enough width so text doesn't break vertically */
  #paypal-container-10, #paypal-container-20{min-width:160px}
  .card-icons{font-size:20px;opacity:0.9;}
  .back-link{display:inline-block;margin-bottom:12px;color:#94a3b8;font-size:13px;text-decoration:none;}

/* Modal removed ‚Äî using simplified checkout flow (auto-scroll + trigger PayPal). */

.note{
  margin-top:14px;
  font-size:13px;
  color:#cbd5f5;
  background:#020617;
  padding:12px;
  border-radius:10px;
} 
</style>
</head>

<body>
<div class="card">

<h1>üè† Home WiFi Payment</h1>
<p>Select a plan and complete PayPal payment</p>

<div class="plan" data-plan="10">
  <h2>‚Ç±10 ‚Äì 8 Hours</h2>
  <div class="plan-sub">8hrs WiFi</div>
  <div class="plan-price">‚Ç±10.00 PHP</div>
  <div class="checkout">
    <div id="paypal-container-10"></div>
    <div class="card-icons" aria-hidden="true">üí≥</div>
  </div>
</div>

<div class="plan" data-plan="20">
  <h2>‚Ç±20 ‚Äì 1 Day</h2>
  <div class="plan-sub">1 day access</div>
  <div class="plan-price">‚Ç±20.00 PHP</div>
  <div class="checkout">
    <div id="paypal-container-20"></div>
    <div class="card-icons" aria-hidden="true">üí≥</div>
  </div>
</div>

<div class="note">
After successful PayPal payment:
<br>‚Ä¢ Take note of the amount paid
<br>‚Ä¢ Message me on Messenger
<br>‚Ä¢ Send your device MAC address
<br><br>
I will reply with your WiFi username & password.
</div>

</div>

<script>
// Render PayPal hosted buttons
paypal.HostedButtons({
  hostedButtonId: "89L86H4QR8LU4"
}).render("#paypal-container-10");

paypal.HostedButtons({
  hostedButtonId: "VSGA8Y2PMUZLJ"
}).render("#paypal-container-20");

// Simplified flow: when ?plan=10 or ?plan=20 is present, hide other plans, add back link,
// scroll to the selected plan and attempt to click the PayPal hosted button (no modal).
(function() {
  const params = new URLSearchParams(window.location.search);
  const plan = params.get('plan');
  if (!plan) return;

  document.querySelectorAll('.plan').forEach(el => {
    if (el.dataset.plan !== plan) el.style.display = 'none';
  });

  // Add a small "Show all plans" link so users can go back
  const back = document.createElement('a');
  back.href = window.location.pathname;
  back.textContent = 'Show all plans';
  back.className = 'back-link';
  const card = document.querySelector('.card');
  if (card) card.insertBefore(back, card.firstChild);

  // Scroll the selected plan into view
  const selected = document.querySelector('.plan[data-plan="'+plan+'"]');
  if (selected) selected.scrollIntoView({behavior:'smooth',block:'center'});

  // Attempt to click the PayPal hosted button in the selected plan (allow it some time to render)
  const container = document.querySelector('#paypal-container-'+plan);
  if (!container) return;

  const findAndClick = () => {
    const btn = container.querySelector('button, input[type=submit], a');
    if (btn) {
      // Let PayPal render visible UI, then emulate click so PayPal opens its checkout UI
      btn.click();
      return true;
    }
    return false;
  };

  if (!findAndClick()) {
    // Poll for up to 3 seconds
    const start = Date.now();
    const poll = setInterval(() => {
      if (findAndClick() || Date.now() - start > 3000) clearInterval(poll);
    }, 150);
  }
})();
</script>

</body>
</html>
