<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pay for Home WiFi</title>

<script 
  src="https://www.paypal.com/sdk/js?client-id=BAAAXOQyESI5vxGDXZpCYu4IRGe3clvM1sBdX6Eml7n26Q27JaHgl9q-gsCRzp_MBKy95uYr8wWvRnBGxY&components=hosted-buttons&currency=PHP">
</script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  font-family:Inter,Arial,sans-serif;
  background:#0f172a;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.card{
  background:#020617;
  padding:24px;
  border-radius:16px;
  width:100%;
  max-width:420px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}
h1{text-align:center;margin-bottom:8px;}
p{text-align:center;color:#94a3b8;font-size:14px;}
.plan{
  border:1px solid #1e293b;
  border-radius:12px;
  padding:16px;
  margin-top:16px;
}
.plan h2{margin:0;font-size:18px;}  .plan-sub{color:#cbd5f5;margin-top:6px;font-size:13px;}
  .plan-price{color:#22c55e;font-weight:600;margin-top:6px;}
  .checkout{margin-top:10px;display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:nowrap;}
  /* Ensure PayPal container has enough width so text doesn't break vertically */
  #paypal-container-10, #paypal-container-20{min-width:160px}
  .card-icons{font-size:20px;opacity:0.9;}
  .back-link{display:inline-block;margin-bottom:12px;color:#94a3b8;font-size:13px;text-decoration:none;}

/* Modal (plan checkout summary) */
.modal-overlay{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center;z-index:1000}
.modal{background:#020617;padding:20px;border-radius:12px;width:320px;max-width:90%;box-shadow:0 10px 30px rgba(0,0,0,0.7);position:relative}
.modal-close{position:absolute;right:12px;top:12px;background:transparent;border:none;color:#94a3b8;font-size:16px;cursor:pointer}
.modal-sub{color:#94a3b8;font-size:14px;margin:6px 0 12px}
.modal-plan .plan-title{font-weight:700;margin-bottom:6px}
.modal-actions{display:flex;gap:8px;align-items:center}
.checkout-btn{background:#0070ba;color:#fff;border:none;padding:10px 14px;border-radius:8px;font-weight:700;cursor:pointer}

.note{
  margin-top:14px;
  font-size:13px;
  color:#cbd5f5;
  background:#020617;
  padding:12px;
  border-radius:10px;
}
</style>
</head>

<body>
<div class="card">

<h1>üè† Home WiFi Payment</h1>
<p>Select a plan and complete PayPal payment</p>

<div class="plan" data-plan="10">
  <h2>‚Ç±10 ‚Äì 8 Hours</h2>
  <div class="plan-sub">8hrs WiFi</div>
  <div class="plan-price">‚Ç±10.00 PHP</div>
  <div class="checkout">
    <div id="paypal-container-10"></div>
    <div class="card-icons" aria-hidden="true">üí≥</div>
  </div>
</div>

<div class="plan" data-plan="20">
  <h2>‚Ç±20 ‚Äì 1 Day</h2>
  <div class="plan-sub">1 day access</div>
  <div class="plan-price">‚Ç±20.00 PHP</div>
  <div class="checkout">
    <div id="paypal-container-20"></div>
    <div class="card-icons" aria-hidden="true">üí≥</div>
  </div>
</div>

<div class="note">
After successful PayPal payment:
<br>‚Ä¢ Take note of the amount paid
<br>‚Ä¢ Message me on Messenger
<br>‚Ä¢ Send your device MAC address
<br><br>
I will reply with your WiFi username & password.
</div>

</div>

<script>
// Render PayPal hosted buttons
paypal.HostedButtons({
  hostedButtonId: "89L86H4QR8LU4"
}).render("#paypal-container-10");

paypal.HostedButtons({
  hostedButtonId: "VSGA8Y2PMUZLJ"
}).render("#paypal-container-20");

// When ?plan=10 or ?plan=20 is present, hide other plans and show only the selected plan
(async function() {
  const params = new URLSearchParams(window.location.search);
  const plan = params.get('plan');
  if (!plan) return;

  document.querySelectorAll('.plan').forEach(el => {
    if (el.dataset.plan !== plan) el.style.display = 'none';
  });

  // Add a small "Show all plans" link so users can go back
  const back = document.createElement('a');
  back.href = window.location.pathname;
  back.textContent = 'Show all plans';
  back.className = 'back-link';
  const card = document.querySelector('.card');
  if (card) card.insertBefore(back, card.firstChild);

  // Scroll the selected plan into view
  const selected = document.querySelector('.plan[data-plan="'+plan+'"]');
  if (selected) selected.scrollIntoView({behavior:'smooth',block:'center'});

  // Build and show modal summary for the plan
  const priceText = selected?.querySelector('.plan-price')?.textContent || '';
  const subText = selected?.querySelector('.plan-sub')?.textContent || '';
  const modalHtml = `
    <div class="modal-overlay" id="plan-modal">
      <div class="modal" role="dialog" aria-modal="true">
        <button class="modal-close" id="modal-close" aria-label="Close">‚úï</button>
        <h3>üè† Home WiFi Payment</h3>
        <p class="modal-sub">Select a plan and complete PayPal payment</p>
        <div class="modal-plan">
          <div class="plan-title">${selected?.querySelector('h2')?.textContent || ''}</div>
          <div class="plan-sub">${subText}</div>
          <div class="plan-price">${priceText}</div>
        </div>
        <div class="modal-actions">
          <button id="modal-checkout" class="checkout-btn">Checkout</button>
          <div class="card-icons">üí≥</div>
        </div>
        <a href="${window.location.pathname}" class="back-link">Show all plans</a>
      </div>
    </div>`;

  const wrapper = document.createElement('div');
  wrapper.innerHTML = modalHtml;
  document.body.appendChild(wrapper);

  document.getElementById('modal-close').addEventListener('click', () => {
    const m = document.getElementById('plan-modal');
    if (m) m.remove();
  });

  document.getElementById('modal-checkout').addEventListener('click', async () => {
    // Try to click PayPal button in the selected plan container
    const container = document.querySelector('#paypal-container-'+plan);
    if (container) {
      // Wait until a button appears (hosted button may render async)
      const findButton = () => container.querySelector('button, input[type=submit], a');
      let button = findButton();
      if (!button) {
        // wait for up to 3s polling
        const start = Date.now();
        while (!button && Date.now() - start < 3000) {
          await new Promise(r => setTimeout(r, 100));
          button = findButton();
        }
      }
      if (button) {
        button.click();
        return;
      }
    }
    // Fallback: scroll to the plan and focus the container to show the embedded button
    if (selected) {
      selected.scrollIntoView({behavior:'smooth', block:'center'});
    }
  });
})();
</script>

</body>
</html>
